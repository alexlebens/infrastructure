libation:
  controllers:
    main:
      type: cronjob
      cronjob:
        suspend: false
        concurrencyPolicy: Forbid
        timeZone: US/Central
        schedule: "0 0 0 * *"
        startingDeadlineSeconds: 90
        successfulJobsHistory: 3
        failedJobsHistory: 3
        backoffLimit: 3
        parallelism: 1
      containers:
        main:
          image:
            repository: rmcrackan/libation
            tag: 12.8.2
            pullPolicy: IfNotPresent
          env:
            - name: SLEEP_TIME
              value: "-1"
            - name: LIBATION_BOOKS_DIR
              value: /data
          resources:
            requests:
              cpu: 10m
              memory: 128Mi
    debug:
      type: deployment
      replicas: 1
      strategy: Recreate
      containers:
        main:
          image:
            repository: ubuntu
            tag: resolute-20251130
            pullPolicy: IfNotPresent
          command:
            - "sleep"
            - "infinity"
          resources:
            requests:
              cpu: 10m
              memory: 32Mi
  persistence:
    config-new:
      forceRename: libation
      storageClass: ceph-block
      accessMode: ReadWriteOnce
      size: 500Mi
      retain: true
      advancedMounts:
        debug:
          main:
            - path: /config
              readOnly: false
    config:
      existingClaim: libation-config
      advancedMounts:
        main:
          main:
            - path: /config
              readOnly: false
        debug:
          main:
            - path: /config-old
              readOnly: false
    data:
      existingClaim: libation-nfs-storage
      advancedMounts:
        main:
          main:
            - path: /data
              readOnly: false
        debug:
          main:
            - path: /data
              readOnly: false
volsync-target-config:
  pvcTarget: libation
