---
# Source: node-feature-discovery/charts/node-feature-discovery/templates/nfd-worker-conf.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: node-feature-discovery-worker-conf
  namespace: node-feature-discovery
  labels:
    helm.sh/chart: node-feature-discovery-0.18.3
    app.kubernetes.io/name: node-feature-discovery
    app.kubernetes.io/instance: node-feature-discovery
    app.kubernetes.io/version: "v0.18.3"
    app.kubernetes.io/managed-by: Helm
data:
  nfd-worker.conf: |-
    sources:
      cpu:
        cpuid:
          attributeWhitelist:
          - AVX512BW
          - AVX512CD
          - AVX512DQ
          - AVX512F
          - AVX512VL
      custom:
      - labels:
          intel.feature.node.kubernetes.io/gpu: "true"
        matchOn:
        - pciId:
            class:
            - "0300"
            vendor:
            - "8086"
        name: intel-gpu
      kernel:
        configOpts:
        - NO_HZ
        - X86
        - DMI
      pci:
        deviceClassWhitelist:
        - "0200"
        - "01"
        - "08"
        - "0300"
        - "0302"
        deviceLabelFields:
        - vendor
        - device
        - class
      usb:
        deviceClassWhitelist:
        - "02"
        - "03"
        - 0e
        - ef
        - fe
        - ff
        deviceLabelFields:
        - vendor
        - device
        - class
