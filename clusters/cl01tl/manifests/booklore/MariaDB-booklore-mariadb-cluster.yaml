apiVersion: k8s.mariadb.com/v1alpha1
kind: MariaDB
metadata:
  name: booklore-mariadb-cluster
  namespace: booklore
  labels:
    helm.sh/chart: mariadb-cluster-25.10.3
    app.kubernetes.io/name: mariadb-cluster
    app.kubernetes.io/instance: booklore
    app.kubernetes.io/version: "0.0.0"
    app.kubernetes.io/managed-by: Helm
spec:
  bootstrapFrom:
    backupContentType: Physical
    s3:
      accessKeyIdSecretKeyRef:
        key: access
        name: booklore-mariadb-cluster-backup-secret-external
      bucket: mariadb-backups-b230a2f5aecf080a4b372c08
      endpoint: nyc3.digitaloceanspaces.com
      prefix: cl01tl/booklore
      region: us-east-1
      secretAccessKeySecretKeyRef:
        key: secret
        name: booklore-mariadb-cluster-backup-secret-external
      tls:
        enabled: true
  galera:
    enabled: true
  replicas: 3
  rootPasswordSecretKeyRef:
    generate: false
    key: password
    name: booklore-database-secret
  storage:
    size: 5Gi
