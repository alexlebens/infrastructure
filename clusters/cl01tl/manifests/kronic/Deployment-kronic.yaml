---
# Source: kronic/charts/kronic/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kronic
  labels:
    helm.sh/chart: kronic-0.1.7
    app.kubernetes.io/name: kronic
    app.kubernetes.io/instance: kronic
    app.kubernetes.io/version: "v0.1.4"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: kronic
      app.kubernetes.io/instance: kronic
  template:
    metadata:
      labels:
        app.kubernetes.io/name: kronic
        app.kubernetes.io/instance: kronic
    spec:
      serviceAccountName: kronic
      securityContext: {}
      containers:
        - name: kronic
          securityContext: {}
          image: "ghcr.io/mshade/kronic:v0.1.4"
          imagePullPolicy: IfNotPresent
          env:
            - name: KRONIC_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: KRONIC_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: kronic-config-secret
                  key: password
            - name: KRONIC_ADMIN_USERNAME
              value: "kronic"
            - name: KRONIC_ALLOW_NAMESPACES
              value: "gitea,vault,talos,libation,kubernetes-cloudflare-ddns"
            - name: KRONIC_NAMESPACE_ONLY
              value: ""
          ports:
            - name: http
              containerPort: 8000
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /healthz
              port: http
          readinessProbe:
            httpGet:
              path: /healthz
              port: http
          resources:
            limits:
              cpu: 1
              memory: 1024Mi
            requests:
              cpu: 10m
              memory: 256Mi
